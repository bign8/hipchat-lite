<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	
	<title>Chat Demo</title>
	<link rel="stylesheet" href="/css.css">
</head>
<body ng-app="git-chat">
	<div class="left">
		<div class="logo">
			<a href="#"><img src="#" alt="GChat" height="58"></a>
		</div>
		<ul class="tabs" ng-controller="list">
			<li id="lobby" ng-class="{'active':!activeItem}" >
				<a href="/" ng-click="setActive(null)">Lobby</a>
			</li>
			<li ng-repeat="room in list" class="ng-cloak" ng-class="{'active':room.active}" >
				<a ng-href="/{{room.privacy}}/{{room.room_id}}" ng-click="setActive(room)">{{room.name}}</a>
			</li>
			<!-- <li><pre>{{list | json}}</pre></li> -->
		</ul>
		<div class="status">
			<a href="#">Status</a>
		</div>
	</div>

	<div class="right" ng-view></div>

	<div class="main" ng-controller="hist" ng-switch="routeParams.room_id">
		<div ng-hide="routeParams.room_id">
			Lobby html	
		</div>
		<!-- TODO: simplify following DOM -->
		<div ng-repeat="msg in temp = (msgs | filter:{room_id:routeParams.room_id})" ng-show="routeParams.room_id" class="chat">
			<div ng-if="new_date($index, temp)" class="date-divider">
				{{msg.stamp | date:'EEEE MMMM d, yyyy'}}
			</div>
			<div class="message me">
				<div class="name">{{msg.name}}</div>
				<div class="body">
					<div class="time">{{msg.stamp | date:'h:mm a'}}</div>
					<div class="txt">{{msg.msg}}</div>
				</div>
			</div>

			<!-- <pre>{{msgs | filter:{room_id:routeParams.room_id} | json}}</pre> -->
		</div>
	</div>

	<div class="input" ng-controller="send" ng-show="routeParams.room_id">
		<form name="messageForm" ng-submit="send">
			<textarea autocomplete="off" id="message_input" ng-enter="send()" ng-model="msg"></textarea>
		</form>
	</div>

	<script src="/socket.io/socket.io.js"></script>
	<script src="/js/angular.min.js"></script>
	<script src="/js/angular-route.min.js"></script>
	<script src="/js/gravatar.js"></script>
	<script src="/js/js.js"></script>
</body>
</html>

